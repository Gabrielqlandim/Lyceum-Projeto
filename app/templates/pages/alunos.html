{% include "pages/head.html" %} {#Head de todas as páginas estão em head.html#}

<title>Portal dos Alunos</title> {#Aluno#}
</head>
<style>
  .cadastrar_aluno {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 10;
    background-color: #cbcaca;
    width: 500px;
    height: 420px;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    display: flex;
}

.background-dark {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5); /* Cor preta com 50% de opacidade */
  z-index: 8; /* Um valor menor que o de .cadastrar_aluno */
}

header {
  z-index: 9;
  /* restante do seu código CSS */
}

.buttons {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 20px;
}
</style>
<body>

  {% include "pages/header.html" %} {#Menu do programa#} 
  {% if check == 1 %}
  <div class="background-dark">
  <div class="cadastrar_aluno">
  {% else %}
  <div hidden class="background-dark">
  <div hidden class="cadastrar_aluno">
  {% endif %}
      <div class="container">
          <h2 id="tittle-cadastro">Cadastrar Aluno</h2><br>
          <form method="POST" action="{% url 'alunos' %}">
              {% csrf_token %}
              <div class="form-group">
                  <label for="nome-aluno">Nome do Aluno:</label>
                  <input type="text" class="form-control" id="nome-aluno" name="nome-aluno" required>
              </div>
              <div class="form-group">
                  <label for="turma-aluno">Turma:</label>
                  <select name="turma-aluno" id="turma-aluno" class="form-control" value="{{serie_turma}}" required>
                      <option value="1-A">1-A</option>
                      <option value="2-A">2-A</option>
                      <option value="3-A">3-A</option>
                      <option value="4-A">4-A</option>
                      <option value="5-A">5-A</option>
                  </select>
              </div>
              <div class="form-group">
                  <label for="data-aluno">Data de Matricula:</label>
                  <input type="date" class="form-control" id="data-aluno" name="data-aluno" required>
              </div>
              <div class="buttons">
              <button type="submit" name="cadastrar_confirmar" class="btn btn-primary">Cadastrar</button>
              <button type="submit" formnovalidate name="cadastrar_cancelar" class="btn btn-primary">Cancelar</button>
              </div>
          </form>
      </div>
  </div>
</div>
  <br><br>
  <div class="table-fundo">
    <table id="alunotable">
      <thead>
        <tr>
          <th onclick="sort(0)" id ="th-table">ID</th>
          <th onclick="sort(1)" id ="th-table">Nome</th>
          <th onclick="sort(2)" id ="th-table">Série/Turma</th>
          <th onclick="sort(3)" id ="th-table">Data de Matrícula</th>        
        </tr>
      </thead>
      <tbody>
        {% for aluno in alunos %}
            <tr>
                <td>{{ aluno.id_aluno }}</td>
                <td>{{ aluno.nome }}</td>
                <td>{{ aluno.serie_turma }}</td>
                <td>{{ aluno.data_matricula }}</td>
                </div>
            </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <br><br>
  <div class="alunos-buttons">
      <form method="POST" action="{% url 'alunos' %}"> {% csrf_token %}
      <button id ="cadastrar-botao" name="cadastrar" class="cadastrar-botao">Cadastrar</button>
      </form>
      <button class="cadastrar-botao" onclick = "editar()">Editar</button>
  </div>

  <script>
    function editar() {
      window.location.replace("{% url 'editar_alunos' %}")
    }
    function sort(n) {
      var table, rows, organizando, pode_organizar, direction, i, linha1, linha2, organizar_count = 0;
      table = document.getElementById("alunotable");
      organizando = true;
      direction = "asc";

      while(organizando) {
        organizando = false;
        rows = table.rows;

        for (i = 1; i < (rows.length - 1); i++) {
          pode_organizar = false;

          linha1 = rows[i].getElementsByTagName("TD")[n];
          linha2 = rows[i+1].getElementsByTagName("TD")[n];

          if(direction == "asc") {
            if(linha1.innerHTML.toLowerCase() > linha2.innerHTML.toLowerCase()) {
              pode_organizar = true;
              break;
            }
          } else if (direction == "desc") {
            if(linha1.innerHTML.toLowerCase() < linha2.innerHTML.toLowerCase()) {
              pode_organizar = true;
              break;
            }
          }
        }
        if (pode_organizar) {
          rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
          organizando = true;
          organizar_count++;
        } else {
          if (organizar_count == 0 && direction == "asc") {
            direction = "desc";
            organizando = true;
          }
        }
      }
    }
  </script>
</body>

</html>
